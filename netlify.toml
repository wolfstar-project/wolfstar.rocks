#  This is the configuration file for Netlify
#  https://docs.netlify.com/configure-builds/file-based-configuration/

[build]
command = "pnpm prisma:generate && pnpm run build" # build command
publish = "dist" # where the built project lives

[build.environment]
NODE_OPTIONS = '--max-old-space-size=4096'

[functions]
external_node_modules = [ '@resvg/resvg-js' ]

[[redirects]]
from = "/*"
to = "/index.html"
status = 200

[[headers]]
for = "/manifest.webmanifest"

[headers.values]
Content-Type = "application/manifest+json"

[[headers]]
for = "/assets/*"

[headers.values]
cache-control = '''
    max-age=31536000,
    immutable
    '''
